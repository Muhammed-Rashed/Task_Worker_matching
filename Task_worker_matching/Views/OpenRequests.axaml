<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="https://github.com/avaloniaui"
             xmlns:vm="clr-namespace:Task_worker_matching.ViewModels"
             x:Class="Task_worker_matching.Views.OpenRequests"
             Width="800" Height="600"
             Background="#111827">
  <UserControl.DataContext>
    <vm:OpenRequestsViewModel/>
  </UserControl.DataContext>

  <Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height="0.05*"/>
      <RowDefinition Height="0.9*"/>
      <RowDefinition Height="0.05*"/>
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
      <ColumnDefinition Width="0.05*"/>
      <ColumnDefinition Width="0.9*"/>
      <ColumnDefinition Width="0.05*"/>
    </Grid.ColumnDefinitions>

    <!-- Navigation Bar -->
    <StackPanel Grid.Row="0" Grid.Column="1"
                Orientation="Horizontal"
                Spacing="10"
                HorizontalAlignment="Center"
                VerticalAlignment="Center">
      <Button Content="Home" Command="{Binding NavigateHomeCommand}" Background="#1f2937" Foreground="White" Padding="8,4" CornerRadius="8" BorderBrush="Transparent"/>
      <Button Content="My Offers" Command="{Binding NavigateMyOffersCommand}" Background="#1f2937" Foreground="White" Padding="8,4" CornerRadius="8" BorderBrush="Transparent"/>
      <Button Content="Open Requests" Background="#2563eb" Foreground="White" Padding="8,4" CornerRadius="8" BorderBrush="Transparent"/>
      <Button Content="Task Execution" Command="{Binding NavigateExecutionCommand}" Background="#1f2937" Foreground="White" Padding="8,4" CornerRadius="8" BorderBrush="Transparent"/>
      <Button Content="Question" Command="{Binding NavigateQuestionsCommand}" Background="#1f2937" Foreground="White" Padding="8,4" CornerRadius="8" BorderBrush="Transparent"/>
      <Button Content="Profile" Command="{Binding NavigateProfileCommand}" Background="#1f2937" Foreground="White" Padding="8,4" CornerRadius="8" BorderBrush="Transparent"/>
      <Button Content="Log Out" Command="{Binding LogoutCommand}" Background="#1f2937" Foreground="White" Padding="8,4" CornerRadius="8" BorderBrush="Transparent"/>
    </StackPanel>

    <!-- Request List -->
    <Border Grid.Row="1" Grid.Column="1" Background="#1f2937" CornerRadius="25" Padding="20">
      <StackPanel Spacing="16">
        <StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch">
          <TextBlock Text="Open Requests" FontSize="18" FontWeight="Bold" Foreground="White"/>
          <Button Content="Filter Requests"
                  Command="{Binding FilterRequestsCommand}"
                  Background="#2563eb"
                  Foreground="White"
                  Padding="6,2"
                  BorderBrush="Transparent"
                  HorizontalAlignment="Right"/>
        </StackPanel>

        <ScrollViewer Height="650" VerticalScrollBarVisibility="Auto">
          <ItemsControl Items="{Binding OpenRequests}">
            <ItemsControl.ItemTemplate>
              <DataTemplate>
                <Border Background="#111827" CornerRadius="8" Padding="16" BorderBrush="#425f9e" BorderThickness="1" Margin="0,0,0,16">
                  <StackPanel Spacing="8">
                    <TextBlock Text="{Binding Task.Name}" FontSize="16" FontWeight="Bold" Foreground="White"/>
                    <TextBlock Text="{Binding Task.Type}" FontSize="12" Foreground="#60a5fa" Background="#1e293b" Padding="2,1" HorizontalAlignment="Left"/>
                    <TextBlock Text="ðŸ“ {Binding Location}" Foreground="LightGray" FontSize="12"/>
                    <TextBlock Text="ðŸ“… {Binding PreferredDate}" Foreground="LightGray" FontSize="12"/>
                    <TextBlock Text="{Binding Description}" Foreground="LightGray" FontSize="12"/>
                    <TextBlock Text="ðŸ’² {Binding Fee}" Foreground="LightGray" FontSize="12"/>
                    <TextBlock Text="â³ {Binding PlacementTime}" Foreground="LightGray" FontSize="12"/>
                    <Button Content="Send Offer" Background="#2563eb" Foreground="White" Padding="6,2" BorderBrush="Transparent" HorizontalAlignment="Right"/>
                  </StackPanel>
                </Border>
              </DataTemplate>
            </ItemsControl.ItemTemplate>
          </ItemsControl>
        </ScrollViewer>
      </StackPanel>
    </Border>
  </Grid>
</UserControl>
