<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:Task_worker_matching.ViewModels"
             x:Class="Task_worker_matching.Views.WorkerProfile"
             x:DataType="vm:WorkerProfileViewModel"
             Width="1024" Height="700"
             Background="#111827">

  <UserControl.DataContext>
    <vm:WorkerProfileViewModel/>
  </UserControl.DataContext>

  <Grid>
    <!-- rows/cols omitted for brevity -->

    <!-- Navigation Bar -->
    <StackPanel x:Name="NavPanel"
                Grid.Row="0" Grid.Column="1"
                Orientation="Horizontal"
                Spacing="10"
                HorizontalAlignment="Center"
                VerticalAlignment="Center">
      <Button Content="Home" Command="{Binding NavigateHomeCommand}"/>
      <Button Content="My offers" Command="{Binding NavigateMyOffersCommand}"/>
      <Button Content="Open requests" Command="{Binding NavigateOpenRequestsCommand}"/>
      <Button Content="Task Execution" Command="{Binding NavigateExecutionCommand}"/>
      <Button Content="Questions" Command="{Binding NavigateQuestionsCommand}"/>
      <Button Content="Profile" Command="{Binding NavigateProfileCommand}" Background="#2563eb"/>
      <Button Content="Log out" Command="{Binding LogoutCommand}"/>
    </StackPanel>

    <!-- Backdrop Panel -->
    <Border Grid.Row="1" Grid.Column="1"
            Background="#1f2937"
            CornerRadius="25"/>

    <!-- Main Content -->
    <Border Grid.Row="1" Grid.Column="1"
            Background="Transparent"
            Padding="24">
      <StackPanel Spacing="24">

        <!-- Profile Section -->
        <Border Background="#111827" BorderBrush="#425f9e" BorderThickness="1" CornerRadius="6" Padding="16">
          <StackPanel Spacing="16">
            <TextBlock Text="Profile" FontSize="16" FontWeight="Bold" Foreground="White"/>

            <!-- Full Name & Email -->
            <Grid ColumnSpacing="12">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
              </Grid.ColumnDefinitions>
              <TextBox Grid.Column="0"
                       Watermark="Full Name"
                       Text="{Binding FullName, Mode=TwoWay}"
                       Background="#374151" Foreground="White" BorderBrush="#425f9e" Height="30"/>
              <TextBox Grid.Column="1"
                       Watermark="Email Address"
                       Text="{Binding Email, Mode=TwoWay}"
                       Background="#374151" Foreground="White" BorderBrush="#425f9e" Height="30"/>
            </Grid>

            <!-- Phone + Save -->
            <Grid ColumnSpacing="12">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="Auto"/>
              </Grid.ColumnDefinitions>
              <TextBox Grid.Column="0"
                       Watermark="Phone Number"
                       Text="{Binding PhoneNumber, Mode=TwoWay}"
                       Background="#374151" Foreground="White" BorderBrush="#425f9e" Height="30"/>
              <Button Grid.Column="1"
                      Content="Save Changes"
                      Command="{Binding SaveProfileCommand}"
                      Background="#2563eb" Foreground="White" Padding="10,4"
                      BorderBrush="Transparent" CornerRadius="6"/>
            </Grid>

            <!-- Change Password -->
            <TextBlock Text="Change Password" FontSize="14" FontWeight="Bold" Foreground="White" Margin="0,8,0,4"/>

            <Grid RowSpacing="8" ColumnSpacing="12">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
              </Grid.ColumnDefinitions>
              <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
              </Grid.RowDefinitions>

              <TextBox Grid.Row="0" Grid.Column="0"
                       Watermark="Current Password"
                       PasswordChar="●"
                       Text="{Binding CurrentPassword, Mode=TwoWay}"
                       Background="#374151" Foreground="White" BorderBrush="#425f9e" Height="30"/>
              <TextBox Grid.Row="0" Grid.Column="1"
                       Watermark="New Password"
                       PasswordChar="●"
                       Text="{Binding NewPassword, Mode=TwoWay}"
                       Background="#374151" Foreground="White" BorderBrush="#425f9e" Height="30"/>

              <TextBox Grid.Row="1" Grid.ColumnSpan="2"
                       Watermark="Confirm Password"
                       PasswordChar="●"
                       Text="{Binding ConfirmPassword, Mode=TwoWay}"
                       Background="#374151" Foreground="White" BorderBrush="#425f9e" Height="30"/>

              <Button Grid.Row="2" Grid.Column="0"
                      Content="Save Changes"
                      Command="{Binding SavePasswordCommand}"
                      Background="#2563eb" Foreground="White" Padding="10,4"
                      BorderBrush="Transparent" CornerRadius="6"
                      HorizontalAlignment="Left"/>
            </Grid>
          </StackPanel>
        </Border>

        <!-- Speciality / Locations / Availability Section -->
        <Border Background="#111827" BorderBrush="#425f9e" BorderThickness="1" CornerRadius="6" Padding="16">
          <StackPanel Spacing="16">
            <Grid ColumnSpacing="24">
              <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="*"/>
              </Grid.ColumnDefinitions>

              <!-- Speciality -->
              <StackPanel Grid.Column="0" Spacing="8">
                <TextBlock Text="Speciality" FontSize="14" FontWeight="Bold" Foreground="White"/>
                <Border Background="#1f2937" CornerRadius="4" Padding="8" Height="80">
                  <ItemsControl Items="{Binding Specialities}">
                    <ItemsControl.ItemTemplate>
                      <DataTemplate>
                        <TextBlock Text="# {Binding}" Foreground="#2563eb" FontSize="12"/>
                      </DataTemplate>
                    </ItemsControl.ItemTemplate>
                  </ItemsControl>
                </Border>
                <Button Content="Edit" Command="{Binding EditSpecialitiesCommand}"
                        Background="#2563eb" Foreground="White" Padding="6,4"
                        BorderBrush="Transparent" CornerRadius="6" HorizontalAlignment="Center"/>
              </StackPanel>

              <!-- Service Locations -->
              <StackPanel Grid.Column="1" Spacing="8">
                <TextBlock Text="Service Locations" FontSize="14" FontWeight="Bold" Foreground="White"/>
                <Border Background="#1f2937" CornerRadius="4" Padding="8" Height="80">
                  <ItemsControl Items="{Binding ServiceLocations}">
                    <ItemsControl.ItemTemplate>
                      <DataTemplate>
                        <TextBlock Text="# {Binding}" Foreground="#2563eb" FontSize="12"/>
                      </DataTemplate>
                    </ItemsControl.ItemTemplate>
                  </ItemsControl>
                </Border>
                <Button Content="Edit" Command="{Binding EditLocationsCommand}"
                        Background="#2563eb" Foreground="White" Padding="6,4"
                        BorderBrush="Transparent" CornerRadius="6" HorizontalAlignment="Center"/>
              </StackPanel>

              <!-- Availability -->
              <StackPanel Grid.Column="2" Spacing="8">
                <TextBlock Text="Availability" FontSize="14" FontWeight="Bold" Foreground="White"/>
                <Border Background="#1f2937" CornerRadius="4" Padding="8" Height="80">
                  <ItemsControl Items="{Binding AvailabilitySlots}">
                    <ItemsControl.ItemTemplate>
                      <DataTemplate>
                        <TextBlock Text="{Binding}" Foreground="LightGray" FontSize="12"/>
                      </DataTemplate>
                    </ItemsControl.ItemTemplate>
                  </ItemsControl>
                </Border>
                <Button Content="Edit" Command="{Binding EditAvailabilityCommand}"
                        Background="#2563eb" Foreground="White" Padding="6,4"
                        BorderBrush="Transparent" CornerRadius="6" HorizontalAlignment="Center"/>
              </StackPanel>

            </Grid>
          </StackPanel>
        </Border>

        <!-- Earning History -->
        <Border Background="#111827" BorderBrush="#425f9e" BorderThickness="1" CornerRadius="6" Padding="16">
          <StackPanel Spacing="12">
            <TextBlock Text="Earning History" FontSize="16" FontWeight="Bold" Foreground="White"/>

            <ItemsControl Items="{Binding Earnings}">
              <ItemsControl.ItemTemplate>
                <DataTemplate x:DataType="vm:EarningViewModel">
                  <Grid RowSpacing="6" ColumnSpacing="6">
                    <Grid.ColumnDefinitions>
                      <ColumnDefinition Width="2*"/>
                      <ColumnDefinition Width="*"/>
                      <ColumnDefinition Width="*"/>
                      <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <!-- Title -->
                    <TextBlock Grid.Column="0" Text="{Binding TaskTitle}" Foreground="White" FontSize="12"/>
                    <!-- Date -->
                    <TextBlock Grid.Column="1" Text="{Binding DateCompleted, StringFormat={}{0:MMM d, yyyy}}" Foreground="White" FontSize="12"/>
                    <!-- Amount -->
                    <TextBlock Grid.Column="2" Text="{Binding Amount, StringFormat={}{0:C}}" Foreground="White" FontSize="12"/>
                    <!-- Client -->
                    <TextBlock Grid.Column="3" Text="{Binding ClientName}" Foreground="#2563eb" FontSize="12"/>
                  </Grid>
                </DataTemplate>
              </ItemsControl.ItemTemplate>
            </ItemsControl>

          </StackPanel>
        </Border>

      </StackPanel>
    </Border>
  </Grid>
</UserControl>
